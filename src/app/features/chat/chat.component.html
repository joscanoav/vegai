<div class="chat-container" aria-live="polite">
  <p-card  class="chat-card">
    <!-- Avatar del asistente -->
<div class="chat-header">
  <img src="assets/images/vegai.jpg" alt="Robot VegaAI" class="robot-avatar" />
  <h2>VegAI</h2>

</div>

    <p-scrollPanel
      #scroll
      [style]="{ height: '45vh' }"
      class="chat-window"
    >
      <div
        *ngFor="let m of messages"
        class="message"
        [ngClass]="m.from"
      >
<div class="message-header">
  <span class="sender">{{ m.from === 'user' ? 'TÃº' : 'VegAI' }}</span>
  <span class="timestamp">{{ m.timestamp | date: 'shortTime' }}</span>
</div>
<div class="message-body">
  <span [innerHTML]="m.text | simpleMarkdown"></span>
</div>

      </div>
    </p-scrollPanel>

    <div *ngIf="loading" class="spinner-overlay">
      <p-progressSpinner></p-progressSpinner>
    </div>

    <div class="input-area">
      <input
        pInputText
        [(ngModel)]="userInput"
        placeholder="Escribe tu mensaje"
        [disabled]="loading"
        (keyup.enter)="send()"
      />

<button
  pButton
  type="button"
  icon="pi pi-stop"
  class="send-btn stop-btn"
  (click)="stopSpeech()"
  [disabled]="!isSpeaking"
  pTooltip="Detener voz"
  tooltipPosition="top"
></button>

      <button
        pButton
        type="button"
        icon="pi pi-send"
        class="send-btn"
        (click)="send()"
        [disabled]="!userInput.trim() || loading"
      ></button>
    </div>
  </p-card>
</div>
